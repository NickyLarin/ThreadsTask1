Ларин Н.С. 5 группа 3 курс


Задание на потоки:
Найти сумму чисел в строках файла

Пример входного файла:
5 6 7 8
9 2
4 9 1

Пример выходного файла:
51

Есть три группы потоков:
- Reader - один поток, последовательно читающий строки из файла, каждая строка - список целых положительных чисел, разделенных пробелом, количество строк - произвольное
- Workers - N потоков, находящих сумму чисел в этих строках (каждый в своей строке)
- Writer - один поток, суммирующий результаты и пишущий их в новый файл

Поток данных выглядит примерно так: reader => { workers } => writer

Условия:
1. Все потоки стартуют, работают и умирают одновременно. То есть writer выполняет суммирование результатов уже обработанных worker'ами строк еще до того, как reader прочел все строки.
3. Так как количество строк произвольное, то может быть так, что их больше чем потоков. В этом случае освободившийся поток должен брать следующую строку.
4. Чтение исходного файла выполнять за один проход.


Компиляция:
gcc main.c stack.c -o main -lpthread -std=gnu99
